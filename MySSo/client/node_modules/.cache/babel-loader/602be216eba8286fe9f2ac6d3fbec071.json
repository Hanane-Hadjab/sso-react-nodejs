{"ast":null,"code":"var _jsxFileName = \"/home/addworking/Documents/Addworking/backoffice-front/src/views/Login/Login.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext } from \"react\";\nimport GoogleButton from \"react-google-button\";\nimport \"../../styles/css/style.css\";\nimport { useHistory } from \"react-router\";\nimport { useDispatch } from \"react-redux\";\nimport { setAuthUser, setIsAuthenticated } from \"../../appSlice\";\nimport axios from \"axios\";\nimport Navbar from \"../../components/Navbar/Navbar\";\nimport { GoogleLogin } from 'react-google-login';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const history = useHistory();\n  const dispatch = useDispatch();\n\n  const fetchAuthUser = async () => {\n    const response = await axios.get(process.env.REACT_APP_URL_API_LOGIN + \"/api/v1/auth/user\", {\n      withCredentials: true,\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).catch(err => {\n      console.log(\"Not properly authenticated\");\n      dispatch(setIsAuthenticated(false));\n      dispatch(setAuthUser(null));\n      history.push(\"/login/error\");\n    });\n\n    if (response && response.data) {\n      console.log(\"User: \", response.data);\n      dispatch(setIsAuthenticated(true));\n      dispatch(setAuthUser(response.data));\n      history.push(\"/dashboard\");\n    }\n  };\n\n  const redirectToGoogleSSO = async () => {\n    let timer = setTimeout(null, 10);\n    const googleLoginURL = process.env.REACT_APP_URL_API_LOGIN + \"/api/v1/login\";\n    const newWindow = window.open(googleLoginURL, \"_blank\", \"width=500,height=600 \");\n\n    if (newWindow) {\n      timer = setInterval(() => {\n        if (newWindow.closed) {\n          console.log(\"Yay we're authenticated\");\n          fetchAuthUser();\n          if (timer) clearInterval(timer);\n        }\n      }, 400);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-6 offset-3 mt-4\",\n        children: /*#__PURE__*/_jsxDEV(GoogleLogin, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Login, \"ztFVC0/0rI8de3REyGzb7ruuLNE=\", false, function () {\n  return [useHistory, useDispatch];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/home/addworking/Documents/Addworking/backoffice-front/src/views/Login/Login.jsx"],"names":["React","useContext","GoogleButton","useHistory","useDispatch","setAuthUser","setIsAuthenticated","axios","Navbar","GoogleLogin","Login","history","dispatch","fetchAuthUser","response","get","process","env","REACT_APP_URL_API_LOGIN","withCredentials","headers","catch","err","console","log","push","data","redirectToGoogleSSO","timer","setTimeout","googleLoginURL","newWindow","window","open","setInterval","closed","clearInterval"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,UAAf,QAAgC,OAAhC;AACA,OAAOC,YAAP,MAAyB,qBAAzB;AACA,OAAO,4BAAP;AACA,SAAQC,UAAR,QAAyB,cAAzB;AACA,SAAQC,WAAR,QAA0B,aAA1B;AACA,SAAQC,WAAR,EAAqBC,kBAArB,QAA8C,gBAA9C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,SAASC,WAAT,QAA4B,oBAA5B;;;AAEA,MAAMC,KAAK,GAAG,MAAM;AAAA;;AAChB,QAAMC,OAAO,GAAGR,UAAU,EAA1B;AAEA,QAAMS,QAAQ,GAAGR,WAAW,EAA5B;;AACA,QAAMS,aAAa,GAAG,YAAY;AAC9B,UAAMC,QAAQ,GAAG,MAAMP,KAAK,CACvBQ,GADkB,CACdC,OAAO,CAACC,GAAR,CAAYC,uBAAZ,GAAsC,mBADxB,EAC6C;AAC5DC,MAAAA,eAAe,EAAE,IAD2C;AAE5DC,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB;AAFmD,KAD7C,EAKlBC,KALkB,CAKXC,GAAD,IAAS;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ;AACAZ,MAAAA,QAAQ,CAACN,kBAAkB,CAAC,KAAD,CAAnB,CAAR;AACAM,MAAAA,QAAQ,CAACP,WAAW,CAAC,IAAD,CAAZ,CAAR;AACAM,MAAAA,OAAO,CAACc,IAAR,CAAa,cAAb;AACH,KAVkB,CAAvB;;AAYA,QAAIX,QAAQ,IAAIA,QAAQ,CAACY,IAAzB,EAA+B;AAC3BH,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBV,QAAQ,CAACY,IAA/B;AACAd,MAAAA,QAAQ,CAACN,kBAAkB,CAAC,IAAD,CAAnB,CAAR;AACAM,MAAAA,QAAQ,CAACP,WAAW,CAACS,QAAQ,CAACY,IAAV,CAAZ,CAAR;AACAf,MAAAA,OAAO,CAACc,IAAR,CAAa,YAAb;AACH;AACJ,GAnBD;;AAoBA,QAAME,mBAAmB,GAAG,YAAY;AACpC,QAAIC,KAAK,GAAGC,UAAU,CAAC,IAAD,EAAO,EAAP,CAAtB;AACA,UAAMC,cAAc,GAChBd,OAAO,CAACC,GAAR,CAAYC,uBAAZ,GAAsC,eAD1C;AAEA,UAAMa,SAAS,GAAGC,MAAM,CAACC,IAAP,CACdH,cADc,EAEd,QAFc,EAGd,uBAHc,CAAlB;;AAKA,QAAIC,SAAJ,EAAe;AACXH,MAAAA,KAAK,GAAGM,WAAW,CAAC,MAAM;AACtB,YAAIH,SAAS,CAACI,MAAd,EAAsB;AAClBZ,UAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACAX,UAAAA,aAAa;AACb,cAAIe,KAAJ,EAAWQ,aAAa,CAACR,KAAD,CAAb;AACd;AACJ,OANkB,EAMhB,GANgB,CAAnB;AAOH;AACJ,GAlBD;;AAoBA,sBACI;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA,2BACI;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA,6BACI;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA,+BACI,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AASH,CArDD;;GAAMlB,K;UACcP,U,EAECC,W;;;KAHfM,K;AAuDN,eAAeA,KAAf","sourcesContent":["import React, {useContext} from \"react\";\nimport GoogleButton from \"react-google-button\";\nimport \"../../styles/css/style.css\";\nimport {useHistory} from \"react-router\";\nimport {useDispatch} from \"react-redux\";\nimport {setAuthUser, setIsAuthenticated} from \"../../appSlice\";\nimport axios from \"axios\";\nimport Navbar from \"../../components/Navbar/Navbar\";\nimport { GoogleLogin } from 'react-google-login';\n\nconst Login = () => {\n    const history = useHistory();\n\n    const dispatch = useDispatch();\n    const fetchAuthUser = async () => {\n        const response = await axios\n            .get(process.env.REACT_APP_URL_API_LOGIN + \"/api/v1/auth/user\", {\n                withCredentials: true,\n                headers: {\"Content-Type\": \"application/json\"}\n            })\n            .catch((err) => {\n                console.log(\"Not properly authenticated\");\n                dispatch(setIsAuthenticated(false));\n                dispatch(setAuthUser(null));\n                history.push(\"/login/error\");\n            });\n\n        if (response && response.data) {\n            console.log(\"User: \", response.data);\n            dispatch(setIsAuthenticated(true));\n            dispatch(setAuthUser(response.data));\n            history.push(\"/dashboard\");\n        }\n    }\n    const redirectToGoogleSSO = async () => {\n        let timer = setTimeout(null, 10);\n        const googleLoginURL =\n            process.env.REACT_APP_URL_API_LOGIN + \"/api/v1/login\";\n        const newWindow = window.open(\n            googleLoginURL,\n            \"_blank\",\n            \"width=500,height=600 \"\n        );\n        if (newWindow) {\n            timer = setInterval(() => {\n                if (newWindow.closed) {\n                    console.log(\"Yay we're authenticated\");\n                    fetchAuthUser();\n                    if (timer) clearInterval(timer);\n                }\n            }, 400);\n        }\n    };\n\n    return (\n        <div className=\"container-fluid\">\n            <div className=\"row\">\n                <div className=\"col-6 offset-3 mt-4\">\n                    <GoogleLogin />\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}